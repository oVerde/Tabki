"use strict";(()=>{var o=class{static endpoint="http://localhost:8765";static async request(e,t){let r={action:e,version:6,params:t??{}};try{let n=await(await fetch(this.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();return n.error?(console.error(`Anki error: ${n.error}`),null):n.result??null}catch(s){return console.error(`Network or other error: ${s}`),null}}static getDeckNames(){return this.request("deckNames")}static async setReviewMode(e){return this.request("guiDeckReview",{name:e})}static async getModelStyling(e){let t=await this.request("modelStyling",{modelName:e});return t?t.css:null}static async getCurrentCard(){return await this.request("guiCurrentCard")}static async getCardInfo(e){let t=await this.request("cardsInfo",{cards:[e]});return t?t[0]:null}static async answerCard(e){return this.request("guiAnswerCard",{ease:e})}};async function i(){let a=document.getElementById("deckName"),e=document.getElementById("save"),t=await o.getDeckNames();if(t)for(let s of t){let n=document.createElement("option");n.value=s,n.textContent=s,a.appendChild(n)}let r=await browser.storage.local.get("deckName");r.deckName&&t?.includes(r.deckName)&&(a.value=r.deckName),e.onclick=async()=>{await browser.storage.local.set({deckName:a.value}),alert("Settings saved!")}}document.addEventListener("DOMContentLoaded",i);})();
